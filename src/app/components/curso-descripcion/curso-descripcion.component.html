<div class="container-fluid">
  <!-- Header -->
  <header class="text-center py-3">
    <h5 class="skillup-title">SkillUp</h5>
  </header>

  <!-- Contenido Principal -->
  <main class="px-md-4">
    
    <!-- Loading -->
    @if (cargando) {
      <div class="text-center py-5">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-2">Cargando curso...</p>
      </div>
    }

    <!-- Error -->
    @if (error && !cargando) {
      <div class="alert alert-danger text-center">
        {{ error }}
      </div>
    }

    <!-- Curso -->
    @if (curso && !cargando) {
      <div class="course-header">
        <div class="container">
          <div class="row">
            
            <!-- Información del Curso -->
            <div class="col-md-8">
              <h1>{{ curso.nombreCurso }}</h1>
              <p class="lead">{{ curso.resumen }}</p>
              
              <div class="rating">
                <span class="star">★★★★☆</span>
                <span class="ms-2">4.6 (920 reseñas)</span>
              </div>
              
              <p class="mt-2"><strong>Duración:</strong> {{ curso.duracionMin }} minutos</p>
              <p><strong>Nivel:</strong> {{ curso.nivel }}</p>
              <p><strong>Publicado:</strong> {{ curso.fechaPublicacion }}</p>
            </div>

            <!-- IMAGEN PRINCIPAL Y ACCIÓN -->
            <div class="col-md-4">
              <!-- Imagen principal del curso -->
              @if (curso.imagenCurso1) {
                <div class="mb-4">
                 <img src="/img/curso/{{ curso.imagenCurso1 }}"  
     alt="{{ curso.nombreCurso }}" 
     class="img-fluid rounded shadow course-main-image"
     style="max-height: 250px; width: 100%; object-fit: cover;">
                </div>
              } @else {
                <div class="course-video-placeholder bg-light rounded d-flex align-items-center justify-content-center mb-4"
                     style="height: 250px;">
                  <p class="text-muted">Imagen del curso</p>
                </div>
              }

              <!-- Botón Acceder al Curso -->
              <div class="mt-3">
                <a [routerLink]="['/curso', cursoId, 'lecciones']" 
                   class="btn btn-primary btn-lg w-100 text-decoration-none">
                  Acceder al Curso
                </a>
                <p class="text-center mt-2">Curso gratuito</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Descripción Detallada -->
      <div class="container course-content mt-5">
        <div class="row">
          <div class="col-lg-8">
            
            <!-- Lo que aprenderás -->
            <section class="mb-5">
              <h3 class="section-title">Lo que aprenderas</h3>
               <p><strong>Descripción</strong> {{ curso.descripcion }}</p>
            </section>


            <!-- CONTENIDO DEL CURSO (Lecciones REALES) -->
            <section class="mb-5">
              <h3 class="section-title">Contenido del Curso</h3>
              
              @if (secciones.length === 0) {
                <div class="alert alert-info">
                  Este curso aún no tiene contenido disponible.
                </div>
              }

              <div class="curriculum-preview">
                @for (seccion of secciones; track seccion.idSeccion) {
                  <div class="module-card mb-3">
                    <h5 class="module-title">{{ seccion.nombreSeccion }}</h5>
                    <ul class="lesson-list">
                      @for (leccion of getLeccionesBySeccion(seccion.idSeccion); track leccion.idLeccion) {
                        <li>
                          <i class="fas fa-play-circle text-primary me-2"></i>
                          {{ leccion.nombreLeccion }}
                          <small class="text-muted ms-2">({{ leccion.duracion }} min)</small>
                        </li>
                      }
                    </ul>
                    @if (getLeccionesBySeccion(seccion.idSeccion).length === 0) {
                      <p class="text-muted small mb-0">No hay lecciones en esta sección</p>
                    }
                  </div>
                }
              </div>
            </section>

            <!-- DATOS DEL INSTRUCTOR (REAL) -->
            <section class="mb-5">
              <h3 class="section-title">Instructor</h3>
                <div class="instructor-card bg-light rounded p-4 d-flex align-items-start">
                    <div class="instructor-avatar bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-4"
                        style="width: 80px; height: 80px; font-size: 1.5rem;">
                    </div>
                    <div>
                    <h5 class="mb-1">Javier Garcia Montes</h5>
                    <p class="text-muted mb-1"><strong>Experiencia:</strong>Multiples en formando nuevos trabajadores</p>
                    <p class="text-muted mb-2"><strong>Grado Académico:</strong> Docente especializado</p>
                    <div class="rating mb-2">
                        <span class="star">★★★★★</span>
                        <span class="ms-2">4.8 rating</span>ng 
                    </div>
                    <p class="small text-muted mb-0">
                        Profesional con amplia experiencia en la industria y dedicado a la enseñanza.
                    </p>
                    </div>
                </div>
      
            </section>

          </div>

          <!-- Reseñas (Sidebar) -->
          <div class="col-lg-4">
            <div class="activity-card">
              <h4>Reseñas de Estudiantes</h4>
              <div class="review-card">
                <div class="rating mb-2">
                  <span class="star">★★★★★</span>
                </div>
                <p>"Excelente curso, muy práctico y accesible."</p>
                <small>- María López</small>
              </div>
              <div class="review-card">
                <div class="rating mb-2">
                  <span class="star">★★★★☆</span>
                </div>
                <p>"Buen contenido, muy bien explicado."</p>
                <small>- Carlos Rodríguez</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    }

  </main>
</div>